<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />

  <style>
    #productList {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-evenly;
    }

    .card-body {
      min-height: 250px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .container-fluid {
      top: 0px;
      z-index: 1000;
      background: linear-gradient(90deg, #1e3c72, #2a5298);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 1%;
    }

    .card-img-top {
      height: 330px;
      object-fit: cover;
    }

    #filterbutton {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 2%;
    }

    .card-footer .btn{
      border: 2px solid black;
      padding: 2%;
      font-size: 80%;
    }
    body {
      overflow-x: hidden;
     
    }
  </style>
</head>

<body>
  <!-- navbar -->
  <nav class="navbar navbar-expand-lg text-white fixed-top p-0">
    <div class="container-fluid ">
      <a href="index.html" class="navbar-brand fw-bold fs-4 text-white">E.<span class="text-warning fs-6">Com</span></a>
      <button class="navbar-toggler bg-white fs-5" type="button" data-bs-toggle="collapse" data-bs-target="#navbar">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbar">
        <ul class="mx-auto navbar-nav">
          <li class="nav-item me-1">
            <a href="index.html" class="nav-link fs-6 text-white fw-bold">Home</a>
          </li>
          <li>
            <a href="https://wa.me/8787256663" class="nav-link fs-6 text-white fw-bold">ContactUs</a>
          </li>
          <li class="nav-item me-1"></li>
          <button class=" btn btn-warning h-25  position-relative" id="cartButton">cart
            <span class="badge position-absolute  bg-danger rounded-pill" id="cartBadge">0</span>
          </button>
          </li>
          <li class="nav-item ms-2">
            <a href="" class="nav-link fs-6 text-white fw-bold">More</a>
          </li>
          <li class="nav-item ms-2">
            <input type="text" name="" id="search" placeholder=" what do want" class="mt-2 ">
          </li>
        </ul>
        <!-- move on other page -->
        <div id="authButtons">
          <a href="login.html" class="btn btn-primary">LogIn</a>
          <a href="register.html" class="btn btn-primary"> Register</a>
        </div>
      </div>
    </div>
  </nav>
  <!-- code for carousel slide -->
  <div class="container-fluid m-0 p-0">
    <div class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active" data-bs-interval="2000">
          <img
            src="https://img.freepik.com/free-photo/laptop-shopping-bags-online-shopping-concept_1423-189.jpg?ga=GA1.1.1499324949.1735317088&semt=ais_hybrid"
            alt="" class="w-100 d-block" height="560px" />
        </div>
        <div class="carousel-item" data-bs-interval="3000">
          <img
            src="https://img.freepik.com/free-vector/online-shopping-illustration-bitcoin-payment-cryptocurrency-card_33099-324.jpg?t=st=1740146354~exp=1740149954~hmac=4b5b40e82af1cb13562f1d70e99f57981f5edd257584a08f1f4bbf98c789112b&w=1060"
            alt="" class="w-100 d-block" height="560px" />
        </div>
        <div class="carousel-item" data-bs-interval="2000">
          <img
            src="https://img.freepik.com/free-vector/perfume-glass-bottle-blue-silk-folded-fabric_33099-1928.jpg?t=st=1740146390~exp=1740149990~hmac=78fc831bb96b18d2148692e2f4cccba2a07d9b6ba95e11eebdc9b146d8f86cf8&w=996"
            alt="" class="w-100 d-block" height="560px" />
        </div>
      </div>
    </div>
  </div>
  <div id="filterbutton"></div>
  <!-- CARD ITEM -->
  <div id="productList"></div>
  <!-- FOOTER -->
  <div class="row bg-danger-subtle mx-auto">
    <div class="col m-5">
      <ul class="navbar-nav p-3">
        <li class="nav-item">
          <h3><span class="bi bi-google text-danger fs-1"></span>4.8</h3>
        </li>
        <li class="fs-6">Google Rating</li>
        <li class="">Based on 2345 reviews</li>
      </ul>
    </div>
    <div class="col m-5">
      <ul class="navbar-nav p-3">
        <li class="nav-item">
          <h3><span class="bi bi-amd text-danger fs-1"></span>4.5</h3>
        </li>
        <li class="fs-5 fw-bold">Tripadvisor <br />Rating</li>
        <li class="fs-6">Based on 2345 reviews</li>
      </ul>
    </div>
    <div class="col m-5">
      <ul class="navbar-nav p-3">
        <li class="nav-item">
          <h3><span class="bi bi-amd text-danger fs-1"></span>4.5</h3>
        </li>
        <li class="fs-5 fw-bold">Tripadvisor <br />Rating</li>
        <li class="fs-6">Based on 2345 reviews</li>
      </ul>
    </div>
    <div class="col m-5">
      <ul class="navbar-nav p-3">
        <li class="nav-item">
          <h3><span class="bi bi-amd text-danger fs-1"></span>4.5</h3>
        </li>
        <li class="fs-5 fw-bold">Tripadvisor <br />Rating</li>
        <li class="fs-6">Based on 2345 reviews</li>
      </ul>
    </div>
  </div>
  <div class="row bg-dark text-white pb-2 border-top pt-2">
    <div class="col text-center d-flex justify-content-center gap-3">
      <span class="bi bi-facebook text-primary"></span>
      <a href="https://www.instagram.com">
        <span class="bi bi-instagram text-danger"></span></a>
      <a href="https://www.facebook.com/yashatap.mauryvanshi">
        <span class="bi bi-twitter text-primary"></span></a>
      <a href="https://www.youtube.com/"> <span class="bi bi-youtube text-danger"></span></a>
      <a href="https://www.linkedin"> <span class="bi bi-linkedin text-primary"></span></a>

    </div>
  </div>
  <div class="col text-center bg-dark text-white border-top fw-bold pt-2">
    <span class="bi bi-c-circle"></span> All Right Reserved
  </div>

  <!-- script link -->
  <script>
    let allProducts = [];
    let cart = JSON.parse(localStorage.getItem('cart') || '[]')


    async function fetchproducts() {
      try {
        const response = await fetch(
          "https://dummyjson.com/products?limit=100"
        );
        const data = await response.json();
        allProducts = data.products;
        displayProducts(allProducts);
        generatefilterbutton(allProducts);
        updateCartBadge()
        // console.log(allProducts);
      } catch (error) {
        console.log(error.message);
      }
    }
    //code for displayProducts 
    function displayProducts(products) {
      const productList = document.getElementById("productList");
      productList.innerHTML = "";
      products.forEach((product) => {
        const card = document.createElement("div");
        card.className = " card mt-2 col-lg-7 shadow-lg p-1   ";
        card.style.width = "20rem";
        card.innerHTML = ` 
        <img src="${product.thumbnail}" class="card-img-top shadow-lg rounded-2 " alt="img loading " >
        <div class="card-body bg-dark-subtle "> 
          <h5 class="card-title ">${product.title}</h5>
           <h3 class="card-title "> $: ${product.price}</h3>
           <p>
           <span class="card-title bi bi-star-half text-warning text-center fs-5 "></span>
           <span class="card-title bi bi-star-half text-warning text-center fs-5 "></span>
           <span class="card-title bi bi-star-half text-warning text-center fs-5 "></span>
           <span class="card-title bi bi-star-half text-warning text-center fs-5 "></span></p>
           <p class="card-title fw-bold	"> <span class="fw-bold text-info-emphasis">Discount:</span> ${product.discountPercentage}%</p>
              <p class="card-title  fw-normal	">  <span class="fw-bold text-info-emphasis">warranty:</span>:${product.warrantyInformation}</p>
                  
              <div class="card-footer text-center d-flex justify-content-around gap-lg-1 mt-2mm ">
          <a href="https://wa.me/${8787256663}?text= prodect Id${product.id},Prodectcode:${product.sku},ProdectName:${product.title}" target="_blank" class="btn btn-outline-warning">Order On<span class="bi bi-whatsapp text-success "><span>  </a>
                   
      <button class="btn add-to-cart"data-id="${product.id}" >Add to card</button>
       <button class="btn view-details" data-id="${product.id}">View Details</button>
    </div>
          </div>
          `;
        productList.appendChild(card);

        
      });

      // code for add-card button 
      document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', function () {
          const productId = parseInt(this.getAttribute('data-id'))
          // console.log(productId)
          addToCart(productId)
        })
      })
      function addToCart(productId) {
      const product = allProducts.find(p => p.id === productId)
      console.log(product)
      const cardItem = cart.find(item => item.id === productId)
      if (cardItem) {
        cardItem.quantity++;
      }
      else {
        cart.push({ ...product, quantity: 1 })
      }
      localStorage.setItem('cart', JSON.stringify(cart))
      updateCartBadge();
    }

    // VIWE DETAIL
    document.querySelectorAll('.view-details').forEach(button =>
      button.addEventListener('click', function () {
        const productId = parseInt(this.getAttribute('data-id'))
        viewdetail(productId)
        console.log(productId)
      })
    )

    function viewdetail(productId) {
      const product = allProducts.find(p => p.id === productId);
      if (product) {
        sessionStorage.setItem('selectedProduct', JSON.stringify(product));
        window.location.href = 'Details.html';
      }
    }
    }
   


    function updateCartBadge() {
      const CartBadge = document.getElementById("cartBadge");
      CartBadge.textContent = cart.reduce((total, item) => total + item.quantity, 0);
    }

    // filterbutton

    function generatefilterbutton(allProducts) {
      const filterbutton = document.getElementById("filterbutton");
      filterbutton.innerHTML = "";
      const categories = allProducts.reduce((acc, product) => {
        if (!acc.includes(product.category)) {
          acc.push(product.category);
        }
        return acc;
      }, []);
      function createButton(category) {
        const button = document.createElement("button");
        button.className = "btn btn-outline-primary";
        // button.textContent = category.charAt(0).toUpperCase()+category.slice(1);
        button.textContent = category.charAt(0).toUpperCase() + category.slice(1);

        button.setAttribute("data-category", category);

        button.addEventListener("click", () => {
          displayProducts(
            category == "all"
              ? allProducts
              : allProducts.filter((product) => product.category == category)
          );
        });
        filterbutton.appendChild(button);
      }
      createButton("all");
      categories.forEach(createButton);
    }


    //  Search function 
    document.getElementById("search").addEventListener('input', function () {
      const query = this.value.toLowerCase();
      const searchProducts = allProducts.filter(product => product.title.toLowerCase().includes(query) || product.description.toLowerCase().includes(query))
      displayProducts(searchProducts)
    })

    document.getElementById("cartButton").addEventListener('click', () => {
      window.location.href = "Cart.html"

    })

    fetchproducts();
  </script>

  <script src="js\auth.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>